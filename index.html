<script>
// =====================================================
// ===== КОНФИГУРАЦИЯ МЕНЮ =====
// Редактируйте только этот массив.
// Порядок объектов = порядок пунктов в меню.
// =====================================================
const MENU_DATA = [{
        title: "Ткани по назначению",
        href: null,
        groups: [{
                title: "На костюм / брюки / жакет",
                items: [
                    { name: "Бархат/велюр/вельвет", href: "/categories/barkhat-veliur-velvet-632232" },
                    { name: "Вискоза", href: "/categories/viskoza-632357" },
                    { name: "Жаккард", href: "/categories/zhakkard-632228" },
                    { name: "Креп костюмный", href: "/categories/krep-kostiumnyi-641414" },
                    { name: "Лён", href: "/categories/len-634904" },
                    { name: "Поливискоза", href: "/categories/poliviskoza-632237" },
                    { name: "Сатин/атлас", href: "/categories/satin-atlas-632388" },
                    { name: "Твид", href: "/categories/tvid-634900" },
                    { name: "Хлопок", href: "/categories/khlopok-632476" },
                    { name: "Шерсть костюмная", href: "/categories/sherst-kostiumnaia-632230" }
                ]
            },
            {
                title: "На куртку / плащ",
                items: [
                    { name: "Курточно-плащевые", href: "/categories/kurtochnye-632359" },
                    { name: "Экокожа", href: "/categories/ekokozha-632219" }
                ]
            },
            {
                title: "На пальто",
                items: [
                    { name: "Пальтовые", href: "/categories/paltovye-632221" },
                    { name: "Твид", href: "/categories/tvid-634900" }
                ]
            },
            {
                title: "На платье / блузку / рубашку",
                items: [
                    { name: "Батист", href: "/categories/batist-632224" },
                    { name: "Вышивка/шитьё", href: "/categories/vyshivka-shite-640560" },
                    { name: "Жаккард", href: "/categories/zhakkard-632358" },
                    { name: "Кади", href: "/categories/kadi-640598" },
                    { name: "Креп", href: "/categories/krep-632234" },
                    { name: "Купро", href: "/categories/kupro-634907" },
                    { name: "Лён", href: "/categories/len-634905" },
                    { name: "Микровельвет/велюр", href: "/categories/mikrovelvet-veliur-632233" },
                    { name: "Органза", href: "/categories/organza-632236" },
                    { name: "Пайетки", href: "/categories/paietki-640583" },
                    { name: "Плательная вискоза", href: "/categories/shtapel-640419" },
                    { name: "Поплин", href: "/categories/poplin-632226" },
                    { name: "Сатин", href: "/categories/satin-632222" },
                    { name: "Сирсакер", href: "/categories/sirsaker-632493" },
                    { name: "Твил", href: "/categories/tvil-632511" },
                    { name: "Тонкая шерсть", href: "/categories/tonkaia-sherst-638740" },
                    { name: "Шифон", href: "/categories/shifon-632223" }
                ]
            },
            {
                title: "На подклад",
                items: [
                    { name: "Подкладка", href: "/categories/podkladka-632220" }
                ]
            },
            {
                title: "На повседневную одежду",
                items: [
                    { name: "Вискозный трикотаж", href: "/categories/viskoznyi-trikotazh-641413" },
                    { name: "Джерси/пунто милано", href: "/categories/dzhersi-punto-milano-634085" },
                    { name: "Интерлок", href: "/categories/interlok-644918" },
                    { name: "Костюмный трикотаж", href: "/categories/kostiumnyi-trikotazh-632231" },
                    { name: "Кулирная гладь", href: "/categories/kulirnaia-glad-636345" },
                    { name: "Рибана", href: "/categories/ribana-644597" },
                    { name: "Рубчик", href: "/categories/rubchik-632227" },
                    { name: "Футер", href: "/categories/futer-636344" },
                    { name: "Шерсть", href: "/categories/sherst-632235" }
                ]
            }
        ]
    },
    {
        title: "Трикотаж",
        href: "/categories/trikotazh-632214",
        items: [
            { name: "Вискозный трикотаж", href: "/categories/viskoznyi-trikotazh-641413" },
            { name: "Джерси/пунто милано", href: "/categories/dzhersi-punto-milano-634085" },
            { name: "Интерлок", href: "/categories/interlok-644918" },
            { name: "Костюмный трикотаж", href: "/categories/kostiumnyi-trikotazh-632231" },
            { name: "Кулирная гладь", href: "/categories/kulirnaia-glad-636345" },
            { name: "Рибана", href: "/categories/ribana-644597" },
            { name: "Рубчик", href: "/categories/rubchik-632227" },
            { name: "Футер", href: "/categories/futer-636344" },
            { name: "Шерсть", href: "/categories/sherst-632235" }
        ]
    },
    {
        title: "Деним и плотный хлопок",
        href: "/categories/denim-632216",
        items: [
            { name: "Джинс", href: "/categories/dzhins-634898" },
            { name: "Саржа", href: "/categories/sarzha-632229" }
        ]
    },
    {
        title: "Отделка и специальные ткани",
        href: null,
        items: [
            { name: "Вышивка/шитьё", href: "/categories/vyshivka-shite-640560" },
            { name: "Пайетки", href: "/categories/paietki-640583" },
            { name: "Сетка/кружево", href: "/categories/setka-kruzhevo-632217" }
        ]
    }
];

// =====================================================
// ===== КОНФИГУРАЦИЯ ВИДЖЕТА =====
// Слоган и ссылки на соцсети — редактируйте здесь.
// =====================================================
const WIDGET_CONFIG = {
    slogan: "Ткани из Италии, Франции и\u00A0Японии с\u00A0доставкой по\u00A0России",
    phone: "+7 969 209-67-52",
    socials: [
        { type: "whatsapp", href: "https://wa.me/79692096752", label: "WhatsApp" },
        { type: "telegram", href: "https://t.me/belezzatessuti", label: "Telegram" },
        { type: "vk",       href: "https://vk.ru/belezzatessuti", label: "ВКонтакте" }
    ]
};
</script>
<style>
/* =====================================================
   Belezza Menu Widget — изолированные стили (префикс bz-)
   ===================================================== */

/* CSS-переменные виджета для быстрой кастомизации */
.bz-menu {
    --bz-bar-bg: rgb(46, 73, 69);
    --bz-bar-text: #ffffff;
    --bz-bar-hover: rgba(255, 255, 255, 0.12);
    --bz-bar-height: 44px;
    --bz-bar-radius: 8px;
    --bz-dropdown-bg: #ffffff;
    --bz-dropdown-shadow: 0 4px 24px rgba(0, 0, 0, 0.12);
    --bz-dropdown-radius: 0 0 16px 16px;
    --bz-group-title-color: #1A1E24;
    --bz-link-color: #4c0600;
    --bz-link-hover: #7a1a0f;
    --bz-font: Raleway, "Helvetica Neue", Arial, sans-serif;
    --bz-transition: 180ms ease;

    /* Accent-цвета */
    --bz-accent-rgb: 46, 73, 69;
    --bz-accent: rgb(var(--bz-accent-rgb));
    --bz-accent-hover: rgba(var(--bz-accent-rgb), 0.55);
    --bz-border-color: #e5e5e5;
    --bz-topbar-bg: #ffffff;
    --bz-mobile-hover-bg: rgba(0, 0, 0, 0.03);

    /* Типографика */
    --bz-font-size-sm: 13px;
    --bz-font-size-base: 14px;
    --bz-font-size-lg: 18px;
    --bz-font-size-xl: 20px;
    --bz-letter-spacing: 0.02em;

    /* Скругления */
    --bz-topbar-radius: var(--bz-bar-radius) var(--bz-bar-radius) 0 0;
    --bz-mobile-toggle-radius: 0 0 var(--bz-bar-radius) var(--bz-bar-radius);
    --bz-mobile-menu-radius: 0 0 var(--bz-bar-radius) var(--bz-bar-radius);

    /* Размеры и отступы */
    --bz-social-icon-size: 48px;
    --bz-dropdown-padding: 24px 28px;
    --bz-topbar-padding: 18px 24px;
    --bz-container-max-width: 1440px;
    --bz-container-min-width: 1260px;
}

/* Сброс стилей внутри виджета */
.bz-menu,
.bz-menu *,
.bz-menu *::before,
.bz-menu *::after {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
}

/* Внешний контейнер страницы */
#bz-menu-root {
    min-width: var(--bz-container-min-width);
    max-width: var(--bz-container-max-width);
    margin-left: auto;
    margin-right: auto;
    padding-left: 1rem;
    padding-right: 1rem;
}

.bz-menu {
    position: relative;
    width: 100%;
    font-family: var(--bz-font);
    font-size: var(--bz-font-size-base);
    line-height: 1.4;
    z-index: 90;
}

/* ===== Бар категорий ===== */
.bz-bar {
    display: flex;
    align-items: center;
    width: 100%;
    height: var(--bz-bar-height);
    background: var(--bz-bar-bg);
    border-radius: var(--bz-bar-radius);
    list-style: none;
    overflow: hidden;
}

.bz-bar__item {
    flex: 1 1 0;
    display: flex;
    align-items: center;
    justify-content: center;
    height: 100%;
    position: relative;
}

.bz-bar__link {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 100%;
    height: 100%;
    padding: 0 12px;
    color: var(--bz-bar-text);
    text-decoration: none;
    font-size: var(--bz-font-size-sm);
    font-weight: 500;
    letter-spacing: var(--bz-letter-spacing);
    white-space: nowrap;
    cursor: pointer;
    transition: background var(--bz-transition);
    user-select: none;
}

.bz-bar__link:hover,
.bz-bar__item--active .bz-bar__link {
    background: var(--bz-bar-hover);
}

/* Стрелка-индикатор dropdown */
.bz-bar__arrow {
    display: inline-block;
    width: 0;
    height: 0;
    margin-left: 6px;
    border-left: 4px solid transparent;
    border-right: 4px solid transparent;
    border-top: 4px solid var(--bz-bar-text);
    transition: transform var(--bz-transition);
    flex-shrink: 0;
}

.bz-bar__item--active .bz-bar__arrow {
    transform: rotate(180deg);
}

/* ===== Mega-dropdown ===== */
.bz-dropdown {
    position: absolute;
    top: 100%;
    left: 0;
    width: 100%;
    background: var(--bz-dropdown-bg);
    border-radius: var(--bz-dropdown-radius);
    box-shadow: var(--bz-dropdown-shadow);
    padding: var(--bz-dropdown-padding);
    opacity: 0;
    visibility: hidden;
    transform: translateY(-4px);
    transition: opacity var(--bz-transition), transform var(--bz-transition), visibility var(--bz-transition);
    pointer-events: none;
    z-index: 91;
}

.bz-dropdown--visible {
    opacity: 1;
    visibility: visible;
    transform: translateY(0);
    pointer-events: auto;
}

/* Раскладка групп (для "Ткани по назначению" — многоколоночная) */
.bz-dropdown__groups {
    display: flex;
    flex-wrap: wrap;
    gap: 24px 32px;
}

.bz-dropdown__group {
    min-width: 180px;
    flex: 0 1 auto;
}

.bz-dropdown__group-title {
    display: block;
    font-size: var(--bz-font-size-base);
    font-weight: 700;
    color: var(--bz-group-title-color);
    margin-bottom: 8px;
    padding-bottom: 6px;
    border-bottom: 1px solid var(--bz-border-color);
}

/* Плоский список (для разделов без groups) */
.bz-dropdown__flat {
    display: flex;
    flex-wrap: wrap;
    gap: 6px 32px;
}

/* Список подкатегорий */
.bz-dropdown__list {
    list-style: none;
    display: flex;
    flex-direction: column;
    gap: 4px;
}

.bz-dropdown__link {
    display: inline-block;
    color: var(--bz-link-color);
    text-decoration: none;
    font-size: var(--bz-font-size-sm);
    font-weight: 400;
    padding: 2px 0;
    transition: color var(--bz-transition);
}

.bz-dropdown__link:hover {
    color: var(--bz-link-hover);
    text-decoration: underline;
}

/* ===== Topbar (слоган + соцсети) ===== */
.bz-topbar {
    display: flex;
    align-items: center;
    justify-content: space-between;
    width: 100%;
    padding: var(--bz-topbar-padding);
    background: var(--bz-topbar-bg);
    border-radius: var(--bz-topbar-radius);
}

.bz-topbar__slogan {
    font-size: var(--bz-font-size-lg);
    font-weight: 500;
    letter-spacing: var(--bz-letter-spacing);
    color: rgba(var(--bz-accent-rgb), 0.75);
    max-width: 340px;
    line-height: 1.35;
}

.bz-topbar__right {
    display: flex;
    align-items: center;
    flex-shrink: 0;
    margin-left: auto;
    padding-left: 24px;
    gap: 20px;
}

.bz-topbar__phone {
    font-size: var(--bz-font-size-xl);
    font-weight: 600;
    color: var(--bz-accent);
    text-decoration: none;
    letter-spacing: var(--bz-letter-spacing);
    white-space: nowrap;
    transition: color var(--bz-transition);
}

.bz-topbar__socials {
    display: flex;
    align-items: center;
    gap: 16px;
}

.bz-topbar__phone:hover {
    color: var(--bz-accent-hover);
}

.bz-topbar__social-link {
    display: flex;
    align-items: center;
    justify-content: center;
    width: var(--bz-social-icon-size);
    height: var(--bz-social-icon-size);
    color: var(--bz-accent);
    transition: color var(--bz-transition);
    text-decoration: none;
}

.bz-topbar__social-link:hover {
    color: rgba(var(--bz-accent-rgb), 0.8);
}

.bz-topbar__social-link svg {
    width: var(--bz-social-icon-size);
    height: var(--bz-social-icon-size);
    fill: currentColor;
    display: block;
}

/* Визуальная связка topbar + bar */
.bz-menu--has-topbar .bz-bar {
    border-radius: var(--bz-bar-radius);
}

/* ===== Мобильный toggle (гамбургер) ===== */
.bz-mobile-toggle {
    display: none;
    align-items: center;
    justify-content: space-between;
    width: 100%;
    height: var(--bz-bar-height);
    padding: 0 16px;
    background: var(--bz-bar-bg);
    color: var(--bz-bar-text);
    border: none;
    border-radius: var(--bz-mobile-toggle-radius);
    font-family: var(--bz-font);
    font-size: var(--bz-font-size-base);
    font-weight: 500;
    cursor: pointer;
    user-select: none;
}

.bz-mobile-toggle__icon {
    font-size: var(--bz-font-size-xl);
    line-height: 1;
    transition: transform var(--bz-transition);
}

.bz-mobile-toggle--open .bz-mobile-toggle__icon {
    transform: rotate(90deg);
}

/* ===== Мобильное аккордеон-меню ===== */
.bz-mobile-menu {
    display: none;
    flex-direction: column;
    width: 100%;
    background: var(--bz-dropdown-bg);
    border-radius: var(--bz-mobile-menu-radius);
    box-shadow: var(--bz-dropdown-shadow);
    overflow: hidden;
}

.bz-mobile-menu--open {
    display: flex;
}

.bz-mobile-menu__category {
    border-bottom: 1px solid var(--bz-border-color);
}

.bz-mobile-menu__category:last-child {
    border-bottom: none;
}

.bz-mobile-menu__header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    width: 100%;
    padding: 12px 16px;
    background: none;
    border: none;
    font-family: var(--bz-font);
    font-size: var(--bz-font-size-base);
    font-weight: 600;
    color: var(--bz-group-title-color);
    cursor: pointer;
    user-select: none;
    text-align: left;
}

.bz-mobile-menu__header:hover {
    background: var(--bz-mobile-hover-bg);
}

.bz-mobile-menu__arrow {
    display: inline-block;
    width: 0;
    height: 0;
    border-left: 5px solid transparent;
    border-right: 5px solid transparent;
    border-top: 5px solid var(--bz-group-title-color);
    transition: transform var(--bz-transition);
    flex-shrink: 0;
}

.bz-mobile-menu__category--open .bz-mobile-menu__arrow {
    transform: rotate(180deg);
}

.bz-mobile-menu__body {
    display: none;
    flex-direction: column;
    padding: 0 16px 12px;
}

.bz-mobile-menu__category--open .bz-mobile-menu__body {
    display: flex;
}

.bz-mobile-menu__group-title {
    font-size: var(--bz-font-size-sm);
    font-weight: 700;
    color: var(--bz-group-title-color);
    margin: 8px 0 4px;
    padding-bottom: 4px;
    border-bottom: 1px solid var(--bz-border-color);
}

.bz-mobile-menu__group-title:first-child {
    margin-top: 0;
}

.bz-mobile-menu__link {
    display: block;
    color: var(--bz-link-color);
    text-decoration: none;
    font-size: var(--bz-font-size-sm);
    font-weight: 400;
    padding: 4px 0;
}

.bz-mobile-menu__link:hover {
    color: var(--bz-link-hover);
    text-decoration: underline;
}

/* ===== Адаптивность ===== */
@media (max-width: 767px) {
    #bz-menu-root {
        min-width: 0;
        padding-left: 0.5rem;
        padding-right: 0.5rem;
    }

    .bz-bar {
        display: none !important;
    }

    .bz-dropdown {
        display: none !important;
    }

    .bz-mobile-toggle {
        display: flex;
    }

    .bz-mobile-toggle--open {
        border-radius: 0;
    }

    .bz-topbar {
        padding: 12px 14px;
        flex-wrap: wrap;
        gap: 8px;
    }

    .bz-topbar__slogan {
        font-size: 14px;
        max-width: 100%;
    }

    .bz-topbar__right {
        padding-left: 0;
    }

    .bz-topbar__socials {
        gap: 10px;
    }

    .bz-topbar__social-link {
        width: 36px;
        height: 36px;
    }

    .bz-topbar__social-link svg {
        width: 36px;
        height: 36px;
    }

    .bz-topbar__phone {
        font-size: 13px;
    }
}

@media (min-width: 768px) {
    .bz-mobile-toggle {
        display: none !important;
    }

    .bz-mobile-menu {
        display: none !important;
    }
}
</style>
<div id="bz-menu-root"></div>
<script>
(function() {
    "use strict";

    var root = document.getElementById("bz-menu-root");
    if (!root || typeof MENU_DATA === "undefined") return;

    // ----- SVG-иконки соцсетей -----
    var SOCIAL_ICONS = {
        whatsapp: '<svg viewBox="0 0 24 24"><path fill-rule="evenodd" clip-rule="evenodd" d="M9.15599 16.5159L6.9113 17.1048L7.51044 14.9162L7.36943 14.6918C6.77574 13.7476 6.46219 12.6562 6.46265 11.5355C6.46394 8.26556 9.12452 5.60522 12.3959 5.60522C13.98 5.60577 15.4691 6.22345 16.5889 7.3445C17.7086 8.46555 18.3249 9.95561 18.3243 11.5403C18.323 14.8106 15.6625 17.4712 12.3936 17.4712H12.3912C11.327 17.4708 10.2831 17.1848 9.37256 16.6445L9.15599 16.5159ZM15.9884 13.2376C15.9526 13.1777 15.8686 13.1371 15.7443 13.077C15.7141 13.0625 15.6816 13.0467 15.6468 13.0293C15.4685 12.9401 14.5919 12.5088 14.4284 12.4492C14.265 12.3898 14.1461 12.36 14.0273 12.5385C13.9084 12.7169 13.5668 13.1186 13.4627 13.2376C13.3587 13.3565 13.2547 13.3715 13.0765 13.2822C13.0474 13.2676 13.0077 13.2504 12.9586 13.2291C12.7076 13.1203 12.2124 12.9055 11.6427 12.3972C11.1126 11.9245 10.7548 11.3406 10.6508 11.1621C10.5468 10.9836 10.6397 10.8872 10.729 10.7983C10.7824 10.7451 10.8437 10.6704 10.9051 10.5957C10.9358 10.5582 10.9666 10.5207 10.9964 10.4859C11.0722 10.3974 11.105 10.3304 11.1497 10.2393C11.1575 10.2232 11.1658 10.2063 11.1747 10.1885C11.2341 10.0694 11.2044 9.96536 11.1599 9.87611C11.13 9.8164 10.9606 9.4038 10.8072 9.03032C10.7313 8.84566 10.6593 8.67036 10.6101 8.55226C10.4824 8.24532 10.3528 8.24607 10.2489 8.24668C10.2351 8.24677 10.2218 8.24684 10.209 8.2462C10.1051 8.24098 9.98613 8.23988 9.86728 8.23988C9.74843 8.23988 9.55525 8.28451 9.39183 8.46301C9.38135 8.47445 9.36965 8.48694 9.35693 8.50051C9.17124 8.69866 8.76782 9.12913 8.76782 9.95039C8.76782 10.8234 9.40004 11.667 9.4944 11.7929L9.49583 11.7948C9.50167 11.8026 9.51213 11.8176 9.52709 11.839C9.74057 12.1452 10.8701 13.7652 12.5416 14.4869C12.967 14.6707 13.2991 14.7804 13.558 14.8625C13.9851 14.9983 14.3738 14.9791 14.681 14.9332C15.0236 14.882 15.7359 14.5019 15.8845 14.0854C16.033 13.6689 16.033 13.3119 15.9884 13.2376Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M8.31421 0H15.6819C22.4059 0 23.998 1.5921 23.998 8.31616V15.6838C23.998 22.4079 22.4059 24 15.6819 24H8.31421C1.59014 24 -0.00195312 22.4079 -0.00195312 15.6838V8.31616C-0.00195312 1.5921 1.59014 0 8.31421 0ZM12.3935 18.6763C16.3277 18.6747 19.5275 15.4742 19.5291 11.5408C19.5298 9.63419 18.7883 7.84143 17.4411 6.49273C16.0939 5.14396 14.3023 4.40085 12.3935 4.40002C8.46041 4.40002 5.25939 7.60087 5.25782 11.5351C5.25729 12.7928 5.58586 14.0203 6.21031 15.1024L5.198 18.8L8.98067 17.8078C10.0229 18.3762 11.1964 18.6759 12.3906 18.6763H12.3935Z"/></svg>',
        telegram: '<svg viewBox="0 0 24 24"><path fill-rule="evenodd" clip-rule="evenodd" d="M15.6838 0H8.31616C1.5921 0 0 1.5921 0 8.31616V15.6838C0 22.4079 1.5921 24 8.31616 24H15.6838C22.4079 24 24 22.4079 24 15.6838V8.31616C24 1.5921 22.4079 0 15.6838 0ZM10.2495 14.6903L14.7481 18.014C15.3 18.3184 15.6983 18.1608 15.8357 17.5016L17.8042 8.22531C18.0058 7.41729 17.4962 7.05081 16.9683 7.29048L5.40928 11.7476C4.62027 12.0641 4.62487 12.5042 5.26546 12.7004L7.92944 13.5319C8.12125 13.5917 8.32968 13.5644 8.49962 13.4572L15.0991 9.29372C15.4233 9.09713 15.7208 9.20282 15.4766 9.41956L10.2235 14.16C10.0626 14.3053 10.0752 14.5615 10.2495 14.6903Z"/></svg>',
        vk: '<svg viewBox="0 0 24 24"><path fill-rule="evenodd" clip-rule="evenodd" d="M8.31616 0H15.6838C22.4079 0 24 1.5921 24 8.31616V15.6838C24 22.4079 22.4079 24 15.6838 24H8.31616C1.5921 24 0 22.4079 0 15.6838V8.31616C0 1.5921 1.5921 0 8.31616 0ZM19.4984 8.20905C19.6205 7.83325 19.4984 7.55994 18.9581 7.55994H17.1629C16.7097 7.55994 16.5006 7.79908 16.3786 8.05531C16.3786 8.05531 15.4548 10.2418 14.1651 11.6596C13.7468 12.0695 13.555 12.2062 13.3285 12.2062C13.2064 12.2062 13.0496 12.0695 13.0496 11.6937V8.19197C13.0496 7.74784 12.9101 7.54286 12.5267 7.54286H9.70314C9.42427 7.54286 9.24998 7.74784 9.24998 7.95282C9.24998 8.37987 9.89487 8.48236 9.96458 9.67809V12.2745C9.96458 12.8382 9.86001 12.9407 9.63343 12.9407C9.0234 12.9407 7.5419 10.7372 6.653 8.22613C6.47871 7.73076 6.30442 7.54286 5.85125 7.54286H4.0386C3.51572 7.54286 3.42857 7.782 3.42857 8.03823C3.42857 8.49944 4.0386 10.8226 6.26956 13.8973C7.75105 15.9984 9.86001 17.1258 11.7598 17.1258C12.9101 17.1258 13.0496 16.8695 13.0496 16.4425V14.8539C13.0496 14.3414 13.1542 14.256 13.5202 14.256C13.7816 14.256 14.2522 14.3927 15.3154 15.4005C16.5355 16.5962 16.7446 17.1429 17.4244 17.1429H19.2196C19.7425 17.1429 19.9865 16.8866 19.847 16.3913C19.6902 15.8959 19.0976 15.1784 18.3307 14.3244C17.9124 13.8461 17.2849 13.3165 17.0932 13.0603C16.8318 12.7187 16.9015 12.582 17.0932 12.2745C17.0758 12.2745 19.2719 9.23396 19.4984 8.20905Z"/></svg>'
    };

    // ----- Рендеринг Topbar -----
    function renderTopbar(config) {
        var topbar = document.createElement("div");
        topbar.className = "bz-topbar";

        var slogan = document.createElement("span");
        slogan.className = "bz-topbar__slogan";
        slogan.textContent = config.slogan;
        topbar.appendChild(slogan);

        var socials = document.createElement("div");
        socials.className = "bz-topbar__socials";

        config.socials.forEach(function(s) {
            var a = document.createElement("a");
            a.className = "bz-topbar__social-link";
            a.href = s.href;
            a.target = "_blank";
            a.rel = "noopener noreferrer";
            a.setAttribute("aria-label", s.label);
            if (SOCIAL_ICONS[s.type]) {
                a.innerHTML = SOCIAL_ICONS[s.type];
            }
            socials.appendChild(a);
        });

        var right = document.createElement("div");
        right.className = "bz-topbar__right";

        if (config.phone) {
            var phoneHref = "tel:" + config.phone.replace(/[\s\-()]/g, "");
            var phone = document.createElement("a");
            phone.className = "bz-topbar__phone";
            phone.href = phoneHref;
            phone.textContent = config.phone;
            right.appendChild(phone);
        }

        right.appendChild(socials);

        topbar.appendChild(right);
        return topbar;
    }

    // ----- Рендеринг мобильного меню -----
    function renderMobileToggle() {
        var btn = document.createElement("button");
        btn.className = "bz-mobile-toggle";
        btn.innerHTML = 'Каталог <span class="bz-mobile-toggle__icon">☰</span>';
        return btn;
    }

    function renderMobileMenu(data) {
        var menu = document.createElement("div");
        menu.className = "bz-mobile-menu";

        data.forEach(function(section) {
            var cat = document.createElement("div");
            cat.className = "bz-mobile-menu__category";

            var header = document.createElement("button");
            header.className = "bz-mobile-menu__header";

            var hasContent = (section.groups && section.groups.length) || (section.items && section.items.length);

            var titleText = document.createTextNode(section.title);
            header.appendChild(titleText);

            if (hasContent) {
                var arrow = document.createElement("span");
                arrow.className = "bz-mobile-menu__arrow";
                header.appendChild(arrow);
            }

            cat.appendChild(header);

            if (hasContent) {
                var body = document.createElement("div");
                body.className = "bz-mobile-menu__body";

                if (section.groups && section.groups.length) {
                    section.groups.forEach(function(group) {
                        var gt = document.createElement("div");
                        gt.className = "bz-mobile-menu__group-title";
                        gt.textContent = group.title;
                        body.appendChild(gt);

                        group.items.forEach(function(item) {
                            var a = document.createElement("a");
                            a.className = "bz-mobile-menu__link";
                            a.href = item.href;
                            a.textContent = item.name;
                            body.appendChild(a);
                        });
                    });
                } else if (section.items && section.items.length) {
                    section.items.forEach(function(item) {
                        var a = document.createElement("a");
                        a.className = "bz-mobile-menu__link";
                        a.href = item.href;
                        a.textContent = item.name;
                        body.appendChild(a);
                    });
                }

                cat.appendChild(body);

                // Аккордеон: toggle по клику
                header.addEventListener("click", function() {
                    cat.classList.toggle("bz-mobile-menu__category--open");
                });
            } else if (section.href) {
                // Категория без подменю — клик = переход
                header.addEventListener("click", function() {
                    window.location.href = section.href;
                });
            }

            menu.appendChild(cat);
        });

        return menu;
    }

    // ----- Рендеринг -----
    function renderBar(data) {
        var nav = document.createElement("nav");
        nav.className = "bz-menu";

        var bar = document.createElement("ul");
        bar.className = "bz-bar";

        data.forEach(function(section, idx) {
            var li = document.createElement("li");
            li.className = "bz-bar__item";
            li.setAttribute("data-index", idx);

            var hasDropdown = (section.groups && section.groups.length) || (section.items && section.items.length);

            var link;
            if (section.href) {
                link = document.createElement("a");
                link.href = section.href;
            } else {
                link = document.createElement("span");
            }
            link.className = "bz-bar__link";
            link.textContent = section.title;

            if (hasDropdown) {
                var arrow = document.createElement("span");
                arrow.className = "bz-bar__arrow";
                link.appendChild(arrow);
            }

            li.appendChild(link);
            bar.appendChild(li);
        });

        nav.appendChild(bar);

        // Dropdown-контейнер (один, переиспользуется)
        var dropdown = document.createElement("div");
        dropdown.className = "bz-dropdown";
        nav.appendChild(dropdown);

        return nav;
    }

    function renderDropdownContent(section) {
        var frag = document.createDocumentFragment();

        if (section.groups && section.groups.length) {
            var wrap = document.createElement("div");
            wrap.className = "bz-dropdown__groups";

            section.groups.forEach(function(group) {
                var col = document.createElement("div");
                col.className = "bz-dropdown__group";

                var title = document.createElement("span");
                title.className = "bz-dropdown__group-title";
                title.textContent = group.title;
                col.appendChild(title);

                var ul = document.createElement("ul");
                ul.className = "bz-dropdown__list";
                group.items.forEach(function(item) {
                    var li = document.createElement("li");
                    var a = document.createElement("a");
                    a.className = "bz-dropdown__link";
                    a.href = item.href;
                    a.textContent = item.name;
                    li.appendChild(a);
                    ul.appendChild(li);
                });
                col.appendChild(ul);
                wrap.appendChild(col);
            });

            frag.appendChild(wrap);
        } else if (section.items && section.items.length) {
            var flat = document.createElement("div");
            flat.className = "bz-dropdown__flat";

            section.items.forEach(function(item) {
                var a = document.createElement("a");
                a.className = "bz-dropdown__link";
                a.href = item.href;
                a.textContent = item.name;
                flat.appendChild(a);
            });

            frag.appendChild(flat);
        }

        return frag;
    }

    // ----- Монтирование -----
    var nav = renderBar(MENU_DATA);

    // Topbar
    if (typeof WIDGET_CONFIG !== "undefined" && WIDGET_CONFIG) {
        var topbar = renderTopbar(WIDGET_CONFIG);
        nav.insertBefore(topbar, nav.firstChild);
        nav.classList.add("bz-menu--has-topbar");
    }

    // Мобильный toggle и меню
    var mobileToggle = renderMobileToggle();
    var mobileMenu = renderMobileMenu(MENU_DATA);
    nav.appendChild(mobileToggle);
    nav.appendChild(mobileMenu);

    mobileToggle.addEventListener("click", function() {
        var isOpen = mobileToggle.classList.toggle("bz-mobile-toggle--open");
        if (isOpen) {
            mobileMenu.classList.add("bz-mobile-menu--open");
        } else {
            mobileMenu.classList.remove("bz-mobile-menu--open");
            // Закрыть все раскрытые категории
            var openCats = mobileMenu.querySelectorAll(".bz-mobile-menu__category--open");
            for (var i = 0; i < openCats.length; i++) {
                openCats[i].classList.remove("bz-mobile-menu__category--open");
            }
        }
    });

    root.appendChild(nav);

    var dropdown = nav.querySelector(".bz-dropdown");
    var barItems = nav.querySelectorAll(".bz-bar__item");
    var activeIndex = -1;
    var hideTimer = null;
    var showTimer = null;
    var SHOW_DELAY = 150;
    var HIDE_DELAY = 200;

    function showDropdown(idx) {
        var section = MENU_DATA[idx];
        var hasContent = (section.groups && section.groups.length) || (section.items && section.items.length);
        if (!hasContent) {
            hideDropdown();
            return;
        }

        // Убрать active с предыдущего
        if (activeIndex >= 0 && barItems[activeIndex]) {
            barItems[activeIndex].classList.remove("bz-bar__item--active");
        }

        activeIndex = idx;
        barItems[idx].classList.add("bz-bar__item--active");

        // Обновить содержимое
        dropdown.innerHTML = "";
        dropdown.appendChild(renderDropdownContent(section));
        dropdown.classList.add("bz-dropdown--visible");
    }

    function hideDropdown() {
        if (activeIndex >= 0 && barItems[activeIndex]) {
            barItems[activeIndex].classList.remove("bz-bar__item--active");
        }
        activeIndex = -1;
        dropdown.classList.remove("bz-dropdown--visible");
    }

    function clearTimers() {
        clearTimeout(hideTimer);
        clearTimeout(showTimer);
    }

    // ----- Hover-логика с debounce -----
    barItems.forEach(function(item, idx) {
        item.addEventListener("mouseenter", function() {
            clearTimers();
            showTimer = setTimeout(function() {
                showDropdown(idx);
            }, SHOW_DELAY);
        });

        item.addEventListener("mouseleave", function() {
            clearTimers();
            hideTimer = setTimeout(hideDropdown, HIDE_DELAY);
        });
    });

    dropdown.addEventListener("mouseenter", function() {
        clearTimers();
    });

    dropdown.addEventListener("mouseleave", function() {
        clearTimers();
        hideTimer = setTimeout(hideDropdown, HIDE_DELAY);
    });

    // Закрытие по клику вне виджета
    document.addEventListener("click", function(e) {
        if (!nav.contains(e.target)) {
            clearTimers();
            hideDropdown();
            // Закрыть мобильное меню
            mobileToggle.classList.remove("bz-mobile-toggle--open");
            mobileMenu.classList.remove("bz-mobile-menu--open");
        }
    });

    // ----- MediaQuery: переключение desktop/mobile -----
    var mql = window.matchMedia("(max-width: 767px)");
    function onMediaChange() {
        // При переключении режима — сбросить состояния
        clearTimers();
        hideDropdown();
        mobileToggle.classList.remove("bz-mobile-toggle--open");
        mobileMenu.classList.remove("bz-mobile-menu--open");
        var openCats = mobileMenu.querySelectorAll(".bz-mobile-menu__category--open");
        for (var i = 0; i < openCats.length; i++) {
            openCats[i].classList.remove("bz-mobile-menu__category--open");
        }
    }
    if (mql.addEventListener) {
        mql.addEventListener("change", onMediaChange);
    } else if (mql.addListener) {
        mql.addListener(onMediaChange);
    }
})();
</script>